document.addEventListener('DOMContentLoaded',()=>{const i=document.getElementById('search');if(!i)return;i.addEventListener('input',async()=>{const q=i.value;const r=await fetch(`/search?q=${q}`);const d=await r.json();const t=document.querySelector('#data-table tbody');t.innerHTML=d.length?d.map(x=>`<tr><td>${x.id}</td><td>${x.nama}</td><td>${x.kategori}</td><td>${x.jumlah}</td><td>Rp ${x.harga}</td><td><a href='/edit/${x.id}' class='btn-sm'>Edit</a><form action='/delete/${x.id}' method='post' style='display:inline' onsubmit='return confirm("Yakin hapus?")'><button type='submit' class='btn-danger'>Hapus</button></form></td></tr>`).join(''):`<tr><td colspan='6' style='text-align:center'>Tidak ada data ditemukan.</td></tr>`;});});